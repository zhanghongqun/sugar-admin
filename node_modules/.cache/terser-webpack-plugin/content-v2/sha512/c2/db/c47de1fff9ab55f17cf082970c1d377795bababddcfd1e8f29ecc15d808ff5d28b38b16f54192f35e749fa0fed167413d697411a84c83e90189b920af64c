{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-29787173\"],{\"32f8\":function(e,t,a){},\"5dbc\":function(e,t,a){var n=a(\"d3f4\"),i=a(\"8b97\").set;e.exports=function(e,t,a){var s,r=t.constructor;return r!==a&&\"function\"==typeof r&&(s=r.prototype)!==a.prototype&&n(s)&&i&&i(e,s),e}},\"8b97\":function(e,t,a){var n=a(\"d3f4\"),i=a(\"cb7c\"),s=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+\": can't set as prototype!\")};e.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(e,t,n){try{n=a(\"9b43\")(Function.call,a(\"11e9\").f(Object.prototype,\"__proto__\").set,2),n(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,a){return s(e,a),t?e.__proto__=a:n(e,a),e}}({},!1):void 0),check:s}},\"96ba\":function(e,t,a){\"use strict\";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"createPost-container\"},[a(\"el-form\",{ref:\"postTask\",staticClass:\"form-container\",attrs:{model:e.postTask,rules:e.rules}},[a(\"sticky\",{attrs:{className:\"sub-navbar \"+e.postTask.status}},[e.fetchSuccess?[a(\"router-link\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isEdit,expression:\"isEdit\"}],staticStyle:{\"margin-right\":\"15px\"},attrs:{to:{path:\"create-form\"}}},[a(\"el-button\",{attrs:{type:\"info\"}},[e._v(\"创建任务\")])],1),e._v(\" \"),a(\"el-button\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"success\"},on:{click:function(t){return e.submitForm()}}},[e._v(\"发布\")]),e._v(\" \"),a(\"el-button\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{type:\"warning\"},on:{click:e.draftForm}},[e._v(\"草稿\")])]:[a(\"el-tag\",[e._v(\"发送异常错误,刷新页面,或者联系程序员\")])]],2),e._v(\" \"),a(\"div\",{staticClass:\"createPost-main-container\"},[a(\"el-row\",[a(\"el-col\",{attrs:{span:21}},[a(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{prop:\"title\"}},[a(\"MDinput\",{attrs:{name:\"name\",required:\"\",maxlength:100},model:{value:e.postTask.name,callback:function(t){e.$set(e.postTask,\"name\",t)},expression:\"postTask.name\"}},[e._v(\"标题\")]),e._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.postTask.name.length>=26,expression:\"postTask.name.length>=26\"}],staticClass:\"title-prompt\"},[e._v(\"app可能会显示不全\")])],1),e._v(\" \"),a(\"div\",{staticClass:\"postInfo-container\"},[a(\"el-row\",[a(\"el-col\",{attrs:{span:8}},[a(\"el-tooltip\",{staticClass:\"item\",attrs:{effect:\"dark\",content:\"商场搜索词\",placement:\"top\"}},[a(\"el-form-item\",{staticClass:\"postInfo-container-item\",attrs:{\"label-width\":\"60px\",label:\"关键字:\"}},[a(\"el-input\",{staticStyle:{\"min-width\":\"150px\"},attrs:{placeholder:\"商场搜索词\"},model:{value:e.postTask.searchKeyword,callback:function(t){e.$set(e.postTask,\"searchKeyword\",t)},expression:\"postTask.searchKeyword\"}})],1)],1)],1),e._v(\" \"),a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{staticClass:\"postInfo-container-item\",attrs:{\"label-width\":\"80px\",label:\"发布时间:\"}},[a(\"el-date-picker\",{attrs:{type:\"datetime\",format:\"yyyy-MM-dd HH:mm:ss\",placeholder:\"选择日期时间\"},model:{value:e.postTask.displayTime,callback:function(t){e.$set(e.postTask,\"displayTime\",t)},expression:\"postTask.displayTime\"}})],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{\"label-width\":\"45px\",label:\"描述:\"}},[a(\"el-input\",{staticClass:\"article-textarea\",attrs:{type:\"textarea\",rows:1,autosize:\"\",placeholder:\"请输入内容\"},model:{value:e.postTask.description,callback:function(t){e.$set(e.postTask,\"description\",t)},expression:\"postTask.description\"}}),e._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.contentShortLength,expression:\"contentShortLength\"}],staticClass:\"word-counter\"},[e._v(e._s(e.contentShortLength)+\"字\")])],1),e._v(\" \"),a(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{\"label-width\":\"45px\",label:\"奖励:\"}},[a(\"el-input\",{staticClass:\"article-textarea\",attrs:{type:\"textarea\",rows:1,autosize:\"\",placeholder:\"请输入内容\"},model:{value:e.postTask.reward,callback:function(t){e.$set(e.postTask,\"reward\",t)},expression:\"postTask.reward\"}}),e._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.contentShortLength,expression:\"contentShortLength\"}],staticClass:\"word-counter\"},[e._v(e._s(e.contentShortLength)+\"字\")])],1),e._v(\" \"),a(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"label\",{staticClass:\"el-form-item__label\"},[e._v(\"图片:\")]),e._v(\" \"),a(\"el-upload\",{attrs:{headers:e.headers,action:\"/sugar/api/file\",limit:1,\"list-type\":\"picture-card\",\"on-preview\":e.handlePictureCardPreview,\"on-remove\":e.handleRemove,\"on-success\":e.handlePictureSuccess,\"file-list\":e.fileList}})],1)],1)],1)],1)},i=[],s=(a(\"7f7f\"),a(\"bd86\")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"material-input__component\",class:e.computedClasses},[a(\"div\",{class:{iconClass:e.icon}},[e.icon?a(\"i\",{staticClass:\"el-input__icon material-input__icon\",class:[\"el-icon-\"+e.icon]}):e._e(),e._v(\" \"),\"email\"===e.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"email\",name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autoComplete:e.autoComplete,required:e.required},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(\" \"),\"url\"===e.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"url\",name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autoComplete:e.autoComplete,required:e.required},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(\" \"),\"number\"===e.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"number\",name:e.name,placeholder:e.fillPlaceHolder,step:e.step,readonly:e.readonly,disabled:e.disabled,autoComplete:e.autoComplete,max:e.max,min:e.min,minlength:e.minlength,maxlength:e.maxlength,required:e.required},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(\" \"),\"password\"===e.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"password\",name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autoComplete:e.autoComplete,max:e.max,min:e.min,required:e.required},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(\" \"),\"tel\"===e.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"tel\",name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autoComplete:e.autoComplete,required:e.required},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(\" \"),\"text\"===e.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"text\",name:e.name,placeholder:e.fillPlaceHolder,readonly:e.readonly,disabled:e.disabled,autoComplete:e.autoComplete,minlength:e.minlength,maxlength:e.maxlength,required:e.required},domProps:{value:e.currentValue},on:{focus:e.handleMdFocus,blur:e.handleMdBlur,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleModelInput]}}):e._e(),e._v(\" \"),a(\"span\",{staticClass:\"material-input-bar\"}),e._v(\" \"),a(\"label\",{staticClass:\"material-label\"},[e._t(\"default\")],2)])])},o=[],l=(a(\"c5f6\"),{name:\"md-input\",props:{icon:String,name:String,type:{type:String,default:\"text\"},value:[String,Number],placeholder:String,readonly:Boolean,disabled:Boolean,min:String,max:String,step:String,minlength:Number,maxlength:Number,required:{type:Boolean,default:!0},autoComplete:{type:String,default:\"off\"},validateEvent:{type:Boolean,default:!0}},computed:{computedClasses:function(){return{\"material--active\":this.focus,\"material--disabled\":this.disabled,\"material--raised\":Boolean(this.focus||this.currentValue)}}},watch:{value:function(e){this.currentValue=e}},data:function(){return{currentValue:this.value,focus:!1,fillPlaceHolder:null}},methods:{handleModelInput:function(e){var t=e.target.value;this.$emit(\"input\",t),\"ElFormItem\"===this.$parent.$options.componentName&&this.validateEvent&&this.$parent.$emit(\"el.form.change\",[t]),this.$emit(\"change\",t)},handleMdFocus:function(e){this.focus=!0,this.$emit(\"focus\",e),this.placeholder&&\"\"!==this.placeholder&&(this.fillPlaceHolder=this.placeholder)},handleMdBlur:function(e){this.focus=!1,this.$emit(\"blur\",e),this.fillPlaceHolder=null,\"ElFormItem\"===this.$parent.$options.componentName&&this.validateEvent&&this.$parent.$emit(\"el.form.blur\",[this.currentValue])}}}),c=l,u=(a(\"cf8b\"),a(\"2877\")),d=Object(u[\"a\"])(c,r,o,!1,null,\"3cb85bd2\",null),p=d.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{style:{height:e.height+\"px\",zIndex:e.zIndex}},[a(\"div\",{class:e.className,style:{top:e.stickyTop+\"px\",zIndex:e.zIndex,position:e.position,width:e.width,height:e.height+\"px\"}},[e._t(\"default\",[a(\"div\",[e._v(\"sticky\")])])],2)])},h=[],f={name:\"Sticky\",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String}},data:function(){return{active:!1,position:\"\",currentTop:\"\",width:void 0,height:void 0,child:null,stickyHeight:0}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener(\"scroll\",this.handleScroll)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener(\"scroll\",this.handleScroll)},methods:{sticky:function(){this.active||(this.position=\"fixed\",this.active=!0,this.width=this.width+\"px\")},reset:function(){this.active&&(this.position=\"\",this.width=\"auto\",this.active=!1)},handleScroll:function(){this.width=this.$el.getBoundingClientRect().width;var e=this.$el.getBoundingClientRect().top;e<=this.stickyTop?this.sticky():this.reset()}}},v=f,g=Object(u[\"a\"])(v,m,h,!1,null,null,null),b=g.exports,y=a(\"b199\"),_=a(\"5f87\"),w={status:\"draft\",name:\"\",description:\"\",reward:\"\",searchKeyword:\"\",pictureUrl:\"\",displayTime:void 0,id:void 0,platforms:[\"a-platform\"],comment_disabled:!1},k={name:\"taskDetail\",components:{Sticky:b,MDinput:p},props:{isEdit:{type:Boolean,default:!1}},data:function(){var e=this,t=function(t,a,n){\"\"===a?(e.$message({message:t.field+\"为必传项\",type:\"error\"}),n(null)):n()},a=function(t,a,n){a?validateURL(a)?n():(e.$message({message:\"外链url填写不正确\",type:\"error\"}),n(null)):n()};return{fileList:[],headers:{Authorization:\"Bearer \"+Object(_[\"a\"])()},postTask:Object.assign({},w),fetchSuccess:!0,loading:!1,limit:1,userLIstOptions:[],platformsOptions:[{key:\"a-platform\",name:\"a-platform\"},{key:\"b-platform\",name:\"b-platform\"},{key:\"c-platform\",name:\"c-platform\"}],rules:Object(s[\"a\"])({pictureUrl:[{validator:t}],name:[{validator:t}],description:[{validator:t}]},\"pictureUrl\",[{validator:a,trigger:\"blur\"}])}},computed:{contentShortLength:function(){return this.postTask.description.length}},created:function(){this.isEdit?this.fetchData():this.postTask=Object.assign({},w)},methods:{handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handlePictureSuccess:function(e,t,a){this.postTask.pictureUrl=e},fetchData:function(){var e=this,t=this.$route.params.taskId;Object(y[\"c\"])(t).then((function(t){e.postTask=t})).catch((function(t){e.fetchSuccess=!1,console.log(t)}))},submitForm:function(){var e=this;this.postTask.displayTime=parseInt(this.postTask.displayTime.getTime()),console.log(this.postTask),Object(y[\"a\"])(this.postTask),this.$refs.postTask.validate((function(t){if(!t)return console.log(\"error submit!!\"),!1;e.loading=!0,e.$notify({title:\"成功\",message:\"发布文章成功\",type:\"success\",duration:2e3}),e.postTask.status=\"published\",e.loading=!1}))},draftForm:function(){0!==this.postTask.description.length&&0!==this.postTask.name.length?(this.$message({message:\"保存成功\",type:\"success\",showClose:!0,duration:1e3}),this.postTask.status=\"draft\"):this.$message({message:\"请填写必要的标题和内容\",type:\"warning\"})}}},x=k,T=(a(\"ca8b\"),Object(u[\"a\"])(x,n,i,!1,null,\"79c1d826\",null));t[\"a\"]=T.exports},a071:function(e,t,a){},aa77:function(e,t,a){var n=a(\"5ca1\"),i=a(\"be13\"),s=a(\"79e5\"),r=a(\"fdef\"),o=\"[\"+r+\"]\",l=\"​\",c=RegExp(\"^\"+o+o+\"*\"),u=RegExp(o+o+\"*$\"),d=function(e,t,a){var i={},o=s((function(){return!!r[e]()||l[e]()!=l})),c=i[e]=o?t(p):r[e];a&&(i[a]=c),n(n.P+n.F*o,\"String\",i)},p=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,\"\")),2&t&&(e=e.replace(u,\"\")),e};e.exports=d},b199:function(e,t,a){\"use strict\";a.d(t,\"b\",(function(){return i})),a.d(t,\"c\",(function(){return s})),a.d(t,\"a\",(function(){return r}));var n=a(\"b775\");function i(e){return Object(n[\"a\"])({url:\"/task/list\",method:\"get\",params:e})}function s(e){return console.log(e),Object(n[\"a\"])({url:\"/task/\"+e,method:\"get\",params:{}})}function r(e){return Object(n[\"a\"])({url:\"/task\",method:\"post\",data:e})}},c5f6:function(e,t,a){\"use strict\";var n=a(\"7726\"),i=a(\"69a8\"),s=a(\"2d95\"),r=a(\"5dbc\"),o=a(\"6a99\"),l=a(\"79e5\"),c=a(\"9093\").f,u=a(\"11e9\").f,d=a(\"86cc\").f,p=a(\"aa77\").trim,m=\"Number\",h=n[m],f=h,v=h.prototype,g=s(a(\"2aeb\")(v))==m,b=\"trim\"in String.prototype,y=function(e){var t=o(e,!1);if(\"string\"==typeof t&&t.length>2){t=b?t.trim():p(t,3);var a,n,i,s=t.charCodeAt(0);if(43===s||45===s){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===s){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var r,l=t.slice(2),c=0,u=l.length;c<u;c++)if(r=l.charCodeAt(c),r<48||r>i)return NaN;return parseInt(l,n)}}return+t};if(!h(\" 0o1\")||!h(\"0b1\")||h(\"+0x1\")){h=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof h&&(g?l((function(){v.valueOf.call(a)})):s(a)!=m)?r(new f(y(t)),a,h):y(t)};for(var _,w=a(\"9e1e\")?c(f):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),k=0;w.length>k;k++)i(f,_=w[k])&&!i(h,_)&&d(h,_,u(f,_));h.prototype=v,v.constructor=h,a(\"2aba\")(n,m,h)}},ca8b:function(e,t,a){\"use strict\";var n=a(\"32f8\"),i=a.n(n);i.a},cf8b:function(e,t,a){\"use strict\";var n=a(\"a071\"),i=a.n(n);i.a},fdef:function(e,t){e.exports=\"\\t\\n\\v\\f\\r   ᠎             　\\u2028\\u2029\\ufeff\"}}]);","extractedComments":[]}