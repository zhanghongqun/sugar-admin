{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-82333bb4\"],{\"1aba\":function(t,e,a){\"use strict\";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"material-input__component\",class:t.computedClasses},[a(\"div\",{class:{iconClass:t.icon}},[t.icon?a(\"i\",{staticClass:\"el-input__icon material-input__icon\",class:[\"el-icon-\"+t.icon]}):t._e(),t._v(\" \"),\"email\"===t.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"email\",name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autoComplete:t.autoComplete,required:t.required},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(\" \"),\"url\"===t.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"url\",name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autoComplete:t.autoComplete,required:t.required},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(\" \"),\"number\"===t.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"number\",name:t.name,placeholder:t.fillPlaceHolder,step:t.step,readonly:t.readonly,disabled:t.disabled,autoComplete:t.autoComplete,max:t.max,min:t.min,minlength:t.minlength,maxlength:t.maxlength,required:t.required},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(\" \"),\"password\"===t.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"password\",name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autoComplete:t.autoComplete,max:t.max,min:t.min,required:t.required},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(\" \"),\"tel\"===t.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"tel\",name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autoComplete:t.autoComplete,required:t.required},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(\" \"),\"text\"===t.type?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.currentValue,expression:\"currentValue\"}],staticClass:\"material-input\",attrs:{type:\"text\",name:t.name,placeholder:t.fillPlaceHolder,readonly:t.readonly,disabled:t.disabled,autoComplete:t.autoComplete,minlength:t.minlength,maxlength:t.maxlength,required:t.required},domProps:{value:t.currentValue},on:{focus:t.handleMdFocus,blur:t.handleMdBlur,input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.handleModelInput]}}):t._e(),t._v(\" \"),a(\"span\",{staticClass:\"material-input-bar\"}),t._v(\" \"),a(\"label\",{staticClass:\"material-label\"},[t._t(\"default\")],2)])])},i=[],s=(a(\"c5f6\"),{name:\"md-input\",props:{icon:String,name:String,type:{type:String,default:\"text\"},value:[String,Number],placeholder:String,readonly:Boolean,disabled:Boolean,min:String,max:String,step:String,minlength:Number,maxlength:Number,required:{type:Boolean,default:!0},autoComplete:{type:String,default:\"off\"},validateEvent:{type:Boolean,default:!0}},computed:{computedClasses:function(){return{\"material--active\":this.focus,\"material--disabled\":this.disabled,\"material--raised\":Boolean(this.focus||this.currentValue)}}},watch:{value:function(t){this.currentValue=t}},data:function(){return{currentValue:this.value,focus:!1,fillPlaceHolder:null}},methods:{handleModelInput:function(t){var e=t.target.value;this.$emit(\"input\",e),\"ElFormItem\"===this.$parent.$options.componentName&&this.validateEvent&&this.$parent.$emit(\"el.form.change\",[e]),this.$emit(\"change\",e)},handleMdFocus:function(t){this.focus=!0,this.$emit(\"focus\",t),this.placeholder&&\"\"!==this.placeholder&&(this.fillPlaceHolder=this.placeholder)},handleMdBlur:function(t){this.focus=!1,this.$emit(\"blur\",t),this.fillPlaceHolder=null,\"ElFormItem\"===this.$parent.$options.componentName&&this.validateEvent&&this.$parent.$emit(\"el.form.blur\",[this.currentValue])}}}),r=s,o=(a(\"cf8b\"),a(\"2877\")),l=Object(o[\"a\"])(r,n,i,!1,null,\"3cb85bd2\",null);e[\"a\"]=l.exports},\"5dbc\":function(t,e,a){var n=a(\"d3f4\"),i=a(\"8b97\").set;t.exports=function(t,e,a){var s,r=e.constructor;return r!==a&&\"function\"==typeof r&&(s=r.prototype)!==a.prototype&&n(s)&&i&&i(t,s),t}},\"6cd7\":function(t,e,a){\"use strict\";var n=a(\"7057\"),i=a.n(n);i.a},7057:function(t,e,a){},\"8b97\":function(t,e,a){var n=a(\"d3f4\"),i=a(\"cb7c\"),s=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+\": can't set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,e,n){try{n=a(\"9b43\")(Function.call,a(\"11e9\").f(Object.prototype,\"__proto__\").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,a){return s(t,a),e?t.__proto__=a:n(t,a),t}}({},!1):void 0),check:s}},\"96ba\":function(t,e,a){\"use strict\";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"createPost-container\"},[a(\"el-form\",{ref:\"postTask\",staticClass:\"form-container\",attrs:{model:t.postTask,rules:t.rules}},[a(\"sticky\",{attrs:{className:\"sub-navbar \"+t.postTask.status}},[t.fetchSuccess?[a(\"router-link\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.isEdit,expression:\"isEdit\"}],staticStyle:{\"margin-right\":\"15px\"},attrs:{to:{path:\"create-form\"}}},[a(\"el-button\",{attrs:{type:\"info\"}},[t._v(\"创建任务\")])],1),t._v(\" \"),a(\"el-button\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"success\"},on:{click:function(e){return t.submitForm()}}},[t._v(\"发布\")]),t._v(\" \"),a(\"el-button\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{type:\"warning\"},on:{click:t.draftForm}},[t._v(\"草稿\")])]:[a(\"el-tag\",[t._v(\"发送异常错误,刷新页面,或者联系程序员\")])]],2),t._v(\" \"),a(\"div\",{staticClass:\"createPost-main-container\"},[a(\"el-row\",[a(\"el-col\",{attrs:{span:21}},[a(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{prop:\"title\"}},[a(\"MDinput\",{attrs:{name:\"name\",required:\"\",maxlength:100},model:{value:t.postTask.name,callback:function(e){t.$set(t.postTask,\"name\",e)},expression:\"postTask.name\"}},[t._v(\"标题\")]),t._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.postTask.name.length>=26,expression:\"postTask.name.length>=26\"}],staticClass:\"title-prompt\"},[t._v(\"app可能会显示不全\")])],1),t._v(\" \"),a(\"div\",{staticClass:\"postInfo-container\"},[a(\"el-row\",[a(\"el-col\",{attrs:{span:8}},[a(\"el-tooltip\",{staticClass:\"item\",attrs:{effect:\"dark\",content:\"商场搜索词\",placement:\"top\"}},[a(\"el-form-item\",{staticClass:\"postInfo-container-item\",attrs:{\"label-width\":\"60px\",label:\"关键字:\"}},[a(\"el-input\",{staticStyle:{\"min-width\":\"150px\"},attrs:{placeholder:\"商场搜索词\"},model:{value:t.postTask.searchKeyword,callback:function(e){t.$set(t.postTask,\"searchKeyword\",e)},expression:\"postTask.searchKeyword\"}})],1)],1)],1),t._v(\" \"),a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{staticClass:\"postInfo-container-item\",attrs:{\"label-width\":\"80px\",label:\"发布时间:\"}},[a(\"el-date-picker\",{attrs:{type:\"datetime\",format:\"yyyy-MM-dd HH:mm:ss\",placeholder:\"选择日期时间\"},model:{value:t.postTask.displayTime,callback:function(e){t.$set(t.postTask,\"displayTime\",e)},expression:\"postTask.displayTime\"}})],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{\"label-width\":\"45px\",label:\"描述:\"}},[a(\"el-input\",{staticClass:\"article-textarea\",attrs:{type:\"textarea\",rows:1,autosize:\"\",placeholder:\"请输入内容\"},model:{value:t.postTask.description,callback:function(e){t.$set(t.postTask,\"description\",e)},expression:\"postTask.description\"}}),t._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.contentShortLength,expression:\"contentShortLength\"}],staticClass:\"word-counter\"},[t._v(t._s(t.contentShortLength)+\"字\")])],1),t._v(\" \"),a(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{\"label-width\":\"45px\",label:\"奖励:\"}},[a(\"el-input\",{staticClass:\"article-textarea\",attrs:{type:\"textarea\",rows:1,autosize:\"\",placeholder:\"请输入内容\"},model:{value:t.postTask.reward,callback:function(e){t.$set(t.postTask,\"reward\",e)},expression:\"postTask.reward\"}}),t._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.contentShortLength,expression:\"contentShortLength\"}],staticClass:\"word-counter\"},[t._v(t._s(t.contentShortLength)+\"字\")])],1),t._v(\" \"),a(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"label\",{staticClass:\"el-form-item__label\"},[t._v(\"图片:\")]),t._v(\" \"),a(\"Upload\",{model:{value:t.postTask.pictureUrl,callback:function(e){t.$set(t.postTask,\"pictureUrl\",e)},expression:\"postTask.pictureUrl\"}})],1)],1)],1)],1)},i=[],s=(a(\"7f7f\"),a(\"bd86\")),r=a(\"cb4a\"),o=a(\"1aba\"),l=a(\"b804\"),c=a(\"b199\"),u={status:\"draft\",name:\"\",description:\"\",reward:\"\",searchKeyword:\"\",pictureUrl:\"\",displayTime:void 0,id:void 0,platforms:[\"a-platform\"],comment_disabled:!1},d={name:\"taskDetail\",components:{Sticky:l[\"a\"],MDinput:o[\"a\"],Upload:r[\"a\"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){var t=this,e=function(e,a,n){\"\"===a?(t.$message({message:e.field+\"为必传项\",type:\"error\"}),n(null)):n()},a=function(e,a,n){a?validateURL(a)?n():(t.$message({message:\"外链url填写不正确\",type:\"error\"}),n(null)):n()};return{postTask:Object.assign({},u),fetchSuccess:!0,loading:!1,userLIstOptions:[],platformsOptions:[{key:\"a-platform\",name:\"a-platform\"},{key:\"b-platform\",name:\"b-platform\"},{key:\"c-platform\",name:\"c-platform\"}],rules:Object(s[\"a\"])({pictureUrl:[{validator:e}],name:[{validator:e}],description:[{validator:e}]},\"pictureUrl\",[{validator:a,trigger:\"blur\"}])}},computed:{contentShortLength:function(){return this.postTask.description.length}},created:function(){this.isEdit?this.fetchData():this.postTask=Object.assign({},u)},methods:{fetchData:function(){var t=this,e=this.$route.params.taskId;Object(c[\"c\"])(e).then((function(e){t.postTask=e})).catch((function(e){t.fetchSuccess=!1,console.log(e)}))},submitForm:function(){var t=this;this.postTask.displayTime=parseInt(this.displayTime/1e3),console.log(this.postTask),Object(c[\"a\"])(this.postTask),this.$refs.postTask.validate((function(e){if(!e)return console.log(\"error submit!!\"),!1;t.loading=!0,t.$notify({title:\"成功\",message:\"发布文章成功\",type:\"success\",duration:2e3}),t.postTask.status=\"published\",t.loading=!1}))},draftForm:function(){0!==this.postTask.description.length&&0!==this.postTask.name.length?(this.$message({message:\"保存成功\",type:\"success\",showClose:!0,duration:1e3}),this.postTask.status=\"draft\"):this.$message({message:\"请填写必要的标题和内容\",type:\"warning\"})}}},p=d,m=(a(\"6cd7\"),a(\"2877\")),h=Object(m[\"a\"])(p,n,i,!1,null,\"5e514763\",null);e[\"a\"]=h.exports},a071:function(t,e,a){},a4bc:function(t,e,a){},aa77:function(t,e,a){var n=a(\"5ca1\"),i=a(\"be13\"),s=a(\"79e5\"),r=a(\"fdef\"),o=\"[\"+r+\"]\",l=\"​\",c=RegExp(\"^\"+o+o+\"*\"),u=RegExp(o+o+\"*$\"),d=function(t,e,a){var i={},o=s((function(){return!!r[t]()||l[t]()!=l})),c=i[t]=o?e(p):r[t];a&&(i[a]=c),n(n.P+n.F*o,\"String\",i)},p=d.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,\"\")),2&e&&(t=t.replace(u,\"\")),t};t.exports=d},b199:function(t,e,a){\"use strict\";a.d(e,\"b\",(function(){return i})),a.d(e,\"c\",(function(){return s})),a.d(e,\"a\",(function(){return r}));var n=a(\"b775\");function i(t){return Object(n[\"a\"])({url:\"/task/list\",method:\"get\",params:t})}function s(t){return console.log(t),Object(n[\"a\"])({url:\"/task/\"+t,method:\"get\",params:{}})}function r(t){return Object(n[\"a\"])({url:\"/task\",method:\"post\",data:t})}},b804:function(t,e,a){\"use strict\";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{style:{height:t.height+\"px\",zIndex:t.zIndex}},[a(\"div\",{class:t.className,style:{top:t.stickyTop+\"px\",zIndex:t.zIndex,position:t.position,width:t.width,height:t.height+\"px\"}},[t._t(\"default\",[a(\"div\",[t._v(\"sticky\")])])],2)])},i=[],s=(a(\"c5f6\"),{name:\"Sticky\",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String}},data:function(){return{active:!1,position:\"\",currentTop:\"\",width:void 0,height:void 0,child:null,stickyHeight:0}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener(\"scroll\",this.handleScroll)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener(\"scroll\",this.handleScroll)},methods:{sticky:function(){this.active||(this.position=\"fixed\",this.active=!0,this.width=this.width+\"px\")},reset:function(){this.active&&(this.position=\"\",this.width=\"auto\",this.active=!1)},handleScroll:function(){this.width=this.$el.getBoundingClientRect().width;var t=this.$el.getBoundingClientRect().top;t<=this.stickyTop?this.sticky():this.reset()}}}),r=s,o=a(\"2877\"),l=Object(o[\"a\"])(r,n,i,!1,null,null,null);e[\"a\"]=l.exports},c5f6:function(t,e,a){\"use strict\";var n=a(\"7726\"),i=a(\"69a8\"),s=a(\"2d95\"),r=a(\"5dbc\"),o=a(\"6a99\"),l=a(\"79e5\"),c=a(\"9093\").f,u=a(\"11e9\").f,d=a(\"86cc\").f,p=a(\"aa77\").trim,m=\"Number\",h=n[m],f=h,v=h.prototype,g=s(a(\"2aeb\")(v))==m,b=\"trim\"in String.prototype,y=function(t){var e=o(t,!1);if(\"string\"==typeof e&&e.length>2){e=b?e.trim():p(e,3);var a,n,i,s=e.charCodeAt(0);if(43===s||45===s){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var r,l=e.slice(2),c=0,u=l.length;c<u;c++)if(r=l.charCodeAt(c),r<48||r>i)return NaN;return parseInt(l,n)}}return+e};if(!h(\" 0o1\")||!h(\"0b1\")||h(\"+0x1\")){h=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof h&&(g?l((function(){v.valueOf.call(a)})):s(a)!=m)?r(new f(y(e)),a,h):y(e)};for(var _,k=a(\"9e1e\")?c(f):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),w=0;k.length>w;w++)i(f,_=k[w])&&!i(h,_)&&d(h,_,u(f,_));h.prototype=v,v.constructor=h,a(\"2aba\")(n,m,h)}},cb4a:function(t,e,a){\"use strict\";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"upload-container\"},[a(\"el-upload\",{staticClass:\"image-uploader\",attrs:{data:t.dataObj,drag:\"\",multiple:!1,\"show-file-list\":!1,action:\"http://localhost:8080/file/upload\",\"on-success\":t.handleImageScucess}},[a(\"i\",{staticClass:\"el-icon-upload\"}),t._v(\" \"),a(\"div\",{staticClass:\"el-upload__text\"},[t._v(\"将文件拖到此处，或\"),a(\"em\",[t._v(\"点击上传\")])])]),t._v(\" \"),a(\"div\",{staticClass:\"image-preview\"},[a(\"div\",{staticClass:\"image-preview-wrapper\"},[a(\"img\",{attrs:{src:\"http://localhost:8080/image/123\"}}),t._v(\" \"),a(\"div\",{staticClass:\"image-preview-action\"},[a(\"i\",{staticClass:\"el-icon-delete\",on:{click:t.rmImage}})])])])],1)},i=[],s={name:\"singleImageUpload\",props:{value:String},computed:{imageUrl:function(){return this.value}},data:function(){return{tempUrl:\"\",dataObj:{token:\"\",key:\"\"}}},methods:{rmImage:function(){this.emitInput(\"\")},emitInput:function(t){this.$emit(\"input\",t)},handleImageScucess:function(){this.emitInput(this.tempUrl)},beforeUpload:function(){var t=this,e=this;return new Promise((function(a,n){getToken().then((function(n){var i=n.data.qiniu_key,s=n.data.qiniu_token;e._data.dataObj.token=s,e._data.dataObj.key=i,t.tempUrl=n.data.qiniu_url,a(!0)})).catch((function(t){console.log(t),n(!1)}))}))}}},r=s,o=(a(\"f8934\"),a(\"2877\")),l=Object(o[\"a\"])(r,n,i,!1,null,\"e8d62c80\",null);e[\"a\"]=l.exports},cf8b:function(t,e,a){\"use strict\";var n=a(\"a071\"),i=a.n(n);i.a},f8934:function(t,e,a){\"use strict\";var n=a(\"a4bc\"),i=a.n(n);i.a},fdef:function(t,e){t.exports=\"\\t\\n\\v\\f\\r   ᠎             　\\u2028\\u2029\\ufeff\"}}]);","extractedComments":[]}